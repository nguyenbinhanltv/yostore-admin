(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{d55m:function(e,n,t){"use strict";t.r(n),t.d(n,"LoginComponent",(function(){return m})),t.d(n,"LoginGuard",(function(){return b})),t.d(n,"LoginModule",(function(){return y})),t.d(n,"loginRoutes",(function(){return f}));var r=t("EM62"),c=t("sEIs"),i=t("ixhn"),a=t("YtkY"),s=t("nIj0"),o=t("Kej3"),l=t("2kYt"),d=t("s2Ay");function h(e,n){1&e&&(r.ic(0,"span"),r.Wc(1,"-"),r.hc())}function p(e,n){if(1&e&&(r.ic(0,"span"),r.Wc(1),r.Uc(2,h,2,0,"span",12),r.hc()),2&e){const e=r.rc();r.Rb(1),r.Yc("",e.brand," "),r.Rb(1),r.yc("ngIf",!e.hideVendureBranding||!e.hideVersion)}}function u(e,n){1&e&&(r.ic(0,"span"),r.Wc(1,"vendure"),r.hc())}function g(e,n){if(1&e&&(r.ic(0,"span"),r.Wc(1),r.hc()),2&e){const e=r.rc();r.Rb(1),r.Yc("v",e.version,"")}}class m{constructor(e,n){this.authService=e,this.router=n,this.username="",this.password="",this.rememberMe=!1,this.version=i.a,this.brand=Object(i.fc)().brand,this.hideVendureBranding=Object(i.fc)().hideVendureBranding,this.hideVersion=Object(i.fc)().hideVersion}logIn(){this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(e=>{switch(e.__typename){case"CurrentUser":const n=this.getRedirectRoute();this.router.navigateByUrl(n||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":this.errorMessage=e.message}})}getRedirectRoute(){let e;const n=new RegExp(`${i.b}=(.*)`);try{const t=window.location.search.match(n);t&&1<t.length&&(e=atob(decodeURIComponent(t[1])))}catch(t){}return e}}m.\u0275fac=function(e){return new(e||m)(r.cc(i.u),r.cc(c.e))},m.\u0275cmp=r.Wb({type:m,selectors:[["vdr-login"]],decls:25,vars:24,consts:[[1,"login-wrapper"],[1,"login"],[1,"title"],["src","assets/logo-300px.png"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModel","placeholder","ngModelChange"],["name","password","type","password","id","login_password",1,"password",3,"ngModel","placeholder","ngModelChange"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"version"],[4,"ngIf"]],template:function(e,n){1&e&&(r.ic(0,"div",0),r.ic(1,"form",1),r.ic(2,"label",2),r.dc(3,"img",3),r.hc(),r.ic(4,"div",4),r.ic(5,"input",5),r.pc("ngModelChange",(function(e){return n.username=e})),r.sc(6,"translate"),r.hc(),r.ic(7,"input",6),r.pc("ngModelChange",(function(e){return n.password=e})),r.sc(8,"translate"),r.hc(),r.ic(9,"clr-alert",7),r.ic(10,"clr-alert-item"),r.ic(11,"span",8),r.Wc(12),r.hc(),r.hc(),r.hc(),r.ic(13,"clr-checkbox-wrapper"),r.ic(14,"input",9),r.pc("ngModelChange",(function(e){return n.rememberMe=e})),r.hc(),r.ic(15,"label"),r.Wc(16),r.sc(17,"translate"),r.hc(),r.hc(),r.ic(18,"button",10),r.pc("click",(function(){return n.logIn()})),r.Wc(19),r.sc(20,"translate"),r.hc(),r.hc(),r.ic(21,"div",11),r.Uc(22,p,3,2,"span",12),r.Uc(23,u,2,0,"span",12),r.Uc(24,g,2,1,"span",12),r.hc(),r.hc(),r.hc()),2&e&&(r.Rb(5),r.yc("ngModel",n.username)("placeholder",r.tc(6,16,"common.username")),r.Rb(2),r.yc("ngModel",n.password)("placeholder",r.tc(8,18,"common.password")),r.Rb(2),r.Ub("visible",n.errorMessage),r.yc("clrAlertType","danger")("clrAlertClosable",!1),r.Rb(3),r.Yc(" ",n.errorMessage," "),r.Rb(2),r.yc("ngModel",n.rememberMe),r.Rb(2),r.Xc(r.tc(17,20,"common.remember-me")),r.Rb(2),r.yc("disabled",!n.username||!n.password),r.Rb(1),r.Yc(" ",r.tc(20,22,"common.login")," "),r.Rb(3),r.yc("ngIf",n.brand),r.Rb(1),r.yc("ngIf",!n.hideVendureBranding),r.Rb(1),r.yc("ngIf",!n.hideVersion))},directives:[s.E,s.q,s.r,o.u,i.fb,s.b,s.p,s.s,o.f,o.g,o.h,o.k,s.a,o.i,l.o],pipes:[d.d],styles:[".login-wrapper[_ngcontent-%COMP%]{background:var(--login-page-bg);background-size:auto;justify-content:center}.title[_ngcontent-%COMP%]{text-align:center}.version[_ngcontent-%COMP%]{align-items:flex-end;color:var(--color-grey-300);display:flex;flex:1;justify-content:center}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden}.login-error.visible[_ngcontent-%COMP%]{-webkit-animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;-webkit-animation-delay:.2s;-webkit-backface-visibility:hidden;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation-delay:.2s;backface-visibility:hidden;max-height:46px;perspective:1000px;transform:translateZ(0);transition:max-height .2s}@-webkit-keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}"]}),m.ctorParameters=()=>[{type:i.u},{type:c.e}];class b{constructor(e,n){this.router=e,this.authService=n}canActivate(e){return this.authService.checkAuthenticatedStatus().pipe(Object(a.a)(e=>(e&&this.router.navigate(["/"]),!e)))}}b.\u0275fac=function(e){return new(e||b)(r.mc(c.e),r.mc(i.u))},b.\u0275prov=Object(r.Yb)({factory:function(){return new b(Object(r.mc)(c.e),Object(r.mc)(i.u))},token:b,providedIn:"root"}),b.ctorParameters=()=>[{type:c.e},{type:i.u}];const f=[{path:"",component:m,pathMatch:"full",canActivate:[b]}];class y{}y.\u0275mod=r.ac({type:y}),y.\u0275inj=r.Zb({factory:function(e){return new(e||y)},imports:[[i.Nb,c.i.forChild(f)]]})}}]);
//# sourceMappingURL=10-es2015.2239b6ed7210b5a3dd07.js.map